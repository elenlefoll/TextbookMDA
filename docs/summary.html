<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Elen Le Foll">
<title>3&nbsp; Synthesis – Textbook English</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./OpenScience.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-ba28ccce6780ffc03abc6a22c7db26d5.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./summary.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Synthesis</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Textbook English <br>(Le Foll 2024)</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="mailto:elefoll@uni-koeln.de" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-envelope"></i></a>
    <a href="https://github.com/elenlefoll/TextbookMDA/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./Textbook-English.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Online supplements</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./OpenScience.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Open Science statement</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Synthesis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AppendixA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Literature Review Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AppendixB.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Corpus Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AppendixC.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Linguistic Features</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AppendixD.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Evaluation of the Multi-Feature Tagger of English (MFTE)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AppendixE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Data Preparation for the Model of Intra-Textbook Variation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AppendixF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">Data Analysis for the Model of Intra-Textbook Variation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AppendixG.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">Data Preparation for the Model of Textbook English vs.&nbsp;‘real-world’ English</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AppendixH.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">Data Analysis for the Model of Textbook English vs.&nbsp;‘real-world’ English</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">3.1</span> Summary</a></li>
  <li><a href="#future-directions" id="toc-future-directions" class="nav-link" data-scroll-target="#future-directions"><span class="header-section-number">3.2</span> Future directions</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Synthesis</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    <div>
    <div class="quarto-title-meta-heading">Last modifications on this page</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">June 22, 2024</p>
    </div>
  </div>
    
  </div>
  


</header><div class="cell">
<style type="text/css">
p {
  text-align: justify
}
</style>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This page displays Chapter 11 from the Author Accepted Manuscript (AAA) version of the book: <a href="https://osf.io/jpxae/" class="uri">https://osf.io/jpxae/</a>. Please cite the Version of Record: <a href="https://benjamins.com/catalog/scl.116" class="uri">https://benjamins.com/catalog/scl.116</a>.</p>
</div>
</div>
<section id="summary" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="summary">
<span class="header-section-number">3.1</span> Summary</h2>
<p>This study has provided a systematic, empirical account of the kind of English that secondary school EFL learners interact with via their textbooks as compared to the kind of English that they can be expected to encounter outside the EFL classroom. This new understanding of Textbook English is important because textbooks constitute one of the major, if not the most important, vector of English language input that EFL learners encounter in the first four to five years of their secondary education. Although it is popular knowledge that the language portrayed in EFL textbooks somehow “feels” different from how English is generally used outside the classroom, this study is the first to attempt to model the nature of these linguistic peculiarities across different registers and textbook proficiency levels by accounting for a broad range of linguistic features and their co-occurrences. Specifically, it set out to describe the language that secondary school pupils in France, Germany, and Spain are exposed to via their coursebooks and their accompanying audio and audio-visual materials.</p>
<p>To this end, the Textbook English Corpus (TEC) was compiled. It comprises nine series of secondary school EFL textbooks (42 textbook volumes) used at lower secondary level in France, Germany, and Spain and was manually annotated for register. Three reference corpora (Spoken BNC2014, Info Teens, and Youth Fiction) were used as baselines for comparisons between the language of the TEC and the kind of naturally occurring English that learners can be expected to encounter, engage with, and produce themselves outside the EFL classroom.</p>
<p>From the literature review (Chapter 3), we concluded that, to date, a multitude of studies have focused on the representations of individual linguistic features in EFL and ESL textbooks. Some of these studies were described as ‘intra-textbook analyses’ because they seek to explore and describe the language of textbooks without relying on any comparison benchmarks. By contrast, ‘comparative textbook language analyses’ draw on reference corpora or corpus-driven lists to infer what is special about the language of textbooks. In this second paradigm, we identified three recurrent issues. First, previous research has failed to consider interactions between the individual linguistic features examined. Thus, whilst some influential studies have helped us to understand how English learners can be misled by their textbooks into making unidiomatic use of specific lexico-grammatical features <span class="citation" data-cites="RomerProgressivesPatternsPedagogy2005">(e.g., <a href="references.html#ref-RomerProgressivesPatternsPedagogy2005" role="doc-biblioref">Römer 2005</a> on the progressive aspect)</span>, we concluded that only a multivariable approach can paint the full picture as to how Textbook English – as a whole – differs from the English that language learners are likely to encounter outside the EFL classroom. Second, we saw that prior scholarship has mostly ignored register differences between the various types of texts typically included in school foreign language textbooks. Given that school EFL textbooks frequently feature, for example, extracts from short stories, dialogues, instructions, and exercises on a single double page, we argued that a meaningful analysis of Textbook English requires a register-based approach. Third, previous quantitative corpus-based studies have usually been undertaken at the corpus level, e.g., comparing the occurrences of a linguistic feature across an entire textbook corpus with those from a reference corpus, and have therefore often failed to account for the effects of varying textbook proficiency levels or the potential idiosyncrasies of individual textbook authors, editors, or publishers. Thus, prior to the present study, much textbook language research had (often implicitly) assumed that Textbook English constitutes a homogenous variety of English with no (systematic) sources of internal variation.</p>
<p>This study set out to test this assumption and uncover the linguistic specificities of Textbook English. Specifically, it examined the extent to which the language of current EFL textbooks used in secondary schools in France, Germany, and Spain is representative of ‘real-world’ English as used by native/proficient English speakers in similar communicative situations. It asked whether some textbook registers are more faithfully represented than others and whether textbooks’ portrayal of different registers becomes more natural-like as the textbooks’ targeted proficiency level increases. Finally, the study also sought to identify the clusters of linguistic features that characterise Textbook English across different registers and learner proficiency levels.</p>
<p>To answer these research questions, Biber’s <span class="citation" data-cites="BiberVariationspeechwriting1988 BiberDimensionsRegisterVariation1995">(<a href="references.html#ref-BiberVariationspeechwriting1988" role="doc-biblioref">1988</a>; <a href="references.html#ref-BiberDimensionsRegisterVariation1995" role="doc-biblioref">1995</a>)</span> multi-feature/multi-dimensional analysis (MDA) framework was chosen as a method capable of summarising the patterns of co-occurrences of many linguistic features across different groups of texts. In a preliminary study, the texts of the TEC were compared against the dimensions of Biber’s <span class="citation" data-cites="BiberVariationspeechwriting1988">(<a href="references.html#ref-BiberVariationspeechwriting1988" role="doc-biblioref">1988</a>)</span> seminal model of variation in general spoken and written registers of English <span class="citation" data-cites="LeFollRegisterVariationSchool2021 LeFollTextbookEnglishCorpusBased2022">(<a href="references.html#ref-LeFollRegisterVariationSchool2021" role="doc-biblioref">Le Foll 2021</a>; <a href="references.html#ref-LeFollTextbookEnglishCorpusBased2022" role="doc-biblioref">2022</a>: chap.&nbsp;6)</span>. On this basis, the present study identified a number of potential methodological issues linked to both the use of Biber’s <span class="citation" data-cites="BiberVariationspeechwriting1988">(<a href="references.html#ref-BiberVariationspeechwriting1988" role="doc-biblioref">1988</a>)</span> model as a baseline and the MDA framework as it is traditionally applied. Consequently, a modified MDA framework was developed and implemented for the present study. This modified framework relies on a stringent selection of linguistic features, the normalisation of feature counts to linguistically informed baselines, the application of a computationally stable dimension reduction method (Principal Component Analysis; PCA), the use of mixed-effects linear regression modelling to tease out the potential mediating effects of various variables, and the interpretation of the results using multi-dimensional graphs that expose, rather than obscure, the full breadth of linguistic variation.</p>
<p>In applying the modified MDA framework, the results of the study have convincingly debunked the long-held assumption that the language of school EFL textbooks can meaningfully be considered a homogenous variety of English. Mode and register emerge as significant drivers of intra-textbook linguistic variation, making it impossible to adequately describe Textbook English without considering situationally determined, functional variation. Despite few significant differences between the language of EFL textbooks used in France, Germany, and Spain or between the nine different textbook series of the TEC, this study did uncover noteworthy interactions between the different text registers and target proficiency levels. The clusters responsible for these interactions underwent close examination. The study also explains and illustrates the key linguistic differences that distinguish stereotypically textbook-like texts from situationally similar ‘real-world’ texts.</p>
<p>Corroborating the findings of previous Textbook English studies, notably Mindt <span class="citation" data-cites="MindtSpracheGrammatikUnterrichtsgrammatik1987 MindtZeitbezugImEnglischen1992 MindtEmpiricalGrammarEnglish1995">(<a href="references.html#ref-MindtSpracheGrammatikUnterrichtsgrammatik1987" role="doc-biblioref">1987</a>; <a href="references.html#ref-MindtZeitbezugImEnglischen1992" role="doc-biblioref">1992</a>; <a href="references.html#ref-MindtEmpiricalGrammarEnglish1995" role="doc-biblioref">1995</a>)</span> and Römer <span class="citation" data-cites="RomerComparingrealideal2004 RomerProgressivesPatternsPedagogy2005">(<a href="references.html#ref-RomerComparingrealideal2004" role="doc-biblioref">2004</a>; <a href="references.html#ref-RomerProgressivesPatternsPedagogy2005" role="doc-biblioref">2005</a>)</span>, the present study identified a wide gap between conversational English as it is presented in contemporary secondary school EFL textbooks and ‘real-world’ conversation that learners can be expected to be involved in outside the EFL classroom. Whilst we are not claiming that all textbook dialogues should resemble the everyday, casual conversations of English L1 speakers (as represented, e.g., in the reference Spoken BNC2014 corpus), it is somewhat disconcerting that, across all nine textbook series of the TEC, textbooks’ representations of conversational spoken English become less authentic as learners are expected to become more proficient in English.</p>
<p>By contrast, and more reassuringly, as the target proficiency levels of the textbooks increased, so did the observed similarities between the informative and fiction subcorpora of the TEC and their respective reference corpora. This latter trend likely points to well-intended pedagogical progressions aimed at scaffolding the development of learners’ linguistic competences. Despite this general trend towards more authentic informative texts as the textbooks’ target proficiency level increases, the results also highlighted potentially problematic textbook texts, even at the highest proficiency levels represented in the TEC (B2). We concluded that some informative texts featured in B2 textbooks were characterised by a lack of register coherence, e.g., pairing words and phrases typical of formal, written English with others more commonly found in informal, (pseudo-)spoken registers. Although this descriptive study makes no claim as to any potential causal links between Textbook English and EFL learners’ production, we did note that a lack of register awareness is an issue that has also been observed in learner corpus research (e.g., Gilquin &amp; Paquot 2008).</p>
<p>We acknowledged that not all textbook texts are designed to reflect naturally occurring English. However, when it is the aim, the results of the present study, along with the use of corpus tools, can be used to adapt or create textbook texts that better reflect the kind of English learners can expect to encounter outside the EFL classroom. The results of the present study support the adoption of a “register approach” to ELT, which entails exposing learners to lexico-grammatical patterns of use in the form of situationally contextualised, meaningful constructions and texts, as proposed by Rühlemann <span class="citation" data-cites="RuhlemannRegisterApproachTeaching2008">(<a href="references.html#ref-RuhlemannRegisterApproachTeaching2008" role="doc-biblioref">2008</a>)</span>. In terms of pedagogical implications, Section 9.4 spelt out the wide-reaching implications of such a register approach for teacher education and materials design.</p>
<p>Although it was originally conceived with the analysis of Textbook English in mind, it is hoped that many of the changes implemented in the modified MDA framework (see 5.3) will be of interest to corpus linguists working on a wide range of research questions and language varieties. Indeed, many of the issues raised in Chapter 5 are not by any means confined to the analysis of textbook language. For instance, the solutions proposed in 5.3.1 to overcome issues such as the comparison of texts of radically different lengths, the lack of punctuation in transcriptions of spoken language (see 5.3.2), and the non-independence of texts/text samples from the same textbook series, web domain or novel (see 5.3.8) are relevant to many other research areas. These include the study of many e-language registers (e.g., social media posts, blogs, forums, product reviews) and texts produced by young L1 users and L2 learners of all ages and proficiency levels.</p>
<p>Whilst by no means claiming to be fail-safe, the publication of the full code and data used to perform the analyses presented in this study is intended to allow for the computational reproducibility of the results. Crucially, it also allows for additional, independent replications. The <a href="https://elenlefoll.github.io/TextbookMDA">Online Supplements</a> exemplify how quantitative (corpus )linguistic methods can, with relatively simple means, be made more transparent, robust, and replicable. Thus, it is hoped that this study may serve as a springboard for further methodological innovations in the multivariate analysis of linguistic data.</p>
</section><section id="future-directions" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="future-directions">
<span class="header-section-number">3.2</span> Future directions</h2>
<p>The present study is descriptive and exploratory in nature. As such, it opens many avenues for future research. It has contributed some methodological innovations to the MDA framework that may be further explored and tested in future MDA studies on diverse language varieties and registers. Regarding the analysis of school EFL textbooks, it has shown how Textbook English can be examined across a broad range of linguistic features both as a variety of English in its own right, and in comparison to various target reference varieties. Future studies could apply the method to study the language of different EFL, ESL and ESP textbooks and other pedagogical materials (e.g., online e learning courses) used in different educational systems and/or at different proficiency levels.</p>
<p>Another avenue to be explored concerns the quality and quantity of the lexical input provided by EFL textbooks. For each textbook volume and series, the word and phraseme types can be extracted and their rates of repetition across each textbook volume and series can be calculated. The lexical input of the 42 textbook volumes and nine textbook series of the TEC could then be compared to examine the extent to which they share a common core EFL lexical syllabus. In addition, the textbooks’ lexical range may be compared to corpus-based lists such as the new General Service List <span class="citation" data-cites="BrezinaThereCoreGeneral2015">(<a href="references.html#ref-BrezinaThereCoreGeneral2015" role="doc-biblioref">Brezina &amp; Gablasova 2015</a>)</span> and the PHRASE List <span class="citation" data-cites="MartinezPhrasalExpressionsList2012">(<a href="references.html#ref-MartinezPhrasalExpressionsList2012" role="doc-biblioref">Martinez &amp; Schmitt 2012</a>)</span>. Given the TEC’s register annotation, it would also be possible to compare the words and phrasemes of an individual textbook register, e.g., the Conversation subcorpus of the TEC with corpus-derived lists of the most frequent words and phrasemes in spoken English <span class="citation" data-cites="FankhauserFormulaicLanguageEFLinpreparation">(e.g., <a href="references.html#ref-FankhauserFormulaicLanguageEFLinpreparation" role="doc-biblioref">Fankhauser-Kahmeier 2024</a>)</span>.</p>
<p>The modified MDA framework could also be applied to analyses of secondary school textbooks of other languages. Indeed, it would be most interesting to compare the present multi-feature/multi-dimensional models of Textbook English with those of other “textbook languages”. Such comparisons may reveal that, cross-linguistically, some of the observed characteristics of Textbook English are in fact universal features of foreign language textbooks – representative of what we might then call: ‘(School) Textbook Language’.</p>
<p>It is important to stress that, on the basis of the present study, we can only speculate as to the impact of Textbook English in and outside the EFL classroom. As vividly put by Cook <span class="citation" data-cites="CookFunctionsInventedSentences2002">(<a href="references.html#ref-CookFunctionsInventedSentences2002" role="doc-biblioref">Cook 2002: 268</a>)</span>, [i]t may be better to teach people how to draw with idealised squares and triangles than with idiosyncratic human faces. Or it may not. The job of applied linguists is to present evidence to demonstrate the learning basis for their claims […]. Whilst a large body of evidence from usage-based linguistic studies and related disciplines has consistently highlighted the strong connection between input exposure and L2 learners’ developmental patterns <span class="citation" data-cites="AchardCognitivelinguisticssecond2004 Perez-Paredesimpactusagebasedapproaches2020 TylerCognitivelinguisticssecond2012 TylerUsageinspiredL2instruction2018a">(e.g., <a href="references.html#ref-AchardCognitivelinguisticssecond2004" role="doc-biblioref">Achard &amp; Niemeier 2004</a>; <a href="references.html#ref-Perez-Paredesimpactusagebasedapproaches2020" role="doc-biblioref">Pérez-Paredes, Mark &amp; O’Keeffe 2020</a>; <a href="references.html#ref-TylerCognitivelinguisticssecond2012" role="doc-biblioref">Tyler 2012</a>; <a href="references.html#ref-TylerUsageinspiredL2instruction2018a" role="doc-biblioref">Tyler &amp; Ortega 2018</a>)</span>, it still remains unclear the extent to which “bring[ing] textbooks for teaching English as a foreign language into closer correspondence with actual English” <span class="citation" data-cites="MindtEnglishcorpuslinguistics1996">(<a href="references.html#ref-MindtEnglishcorpuslinguistics1996" role="doc-biblioref">Mindt 1996: 247</a>)</span> will facilitate or hamper learners’ progress. Crucially, we must remember that, as insightful as these multi-dimensional descriptions of Textbook English have been, textbooks do not exist in a vacuum. Yet surprisingly few empirical studies have looked into how textbooks – i.e., not only their language, but also their structures, tasks, and activities – mediate classroom interactions and learning outcomes <span class="citation" data-cites="RoslerPerspektivenvielfaltLehrwerkanalyseund2016">(<a href="references.html#ref-RoslerPerspektivenvielfaltLehrwerkanalyseund2016" role="doc-biblioref">Rösler &amp; Schart 2016: 490</a>)</span>. In addition, much research remains to be done on how teachers and students actually use textbooks in the classroom. Empirical data on the status quo in secondary EFL classrooms is urgently needed to a) understand the real impact of textbooks and b) develop research-informed recommendations for materials designers and new pre- and in-service teacher training courses that genuinely address current problems and meet teachers’ and learners’ needs.</p>
<p>In addition to classroom-based investigations into textbook use and learning outcome, the results of the present study and follow-up corpus-based textbook language studies may be triangulated with findings from learner corpora to gain new insights into L2 learning processes. Such research could test McEnery and Kifle’s (1998) hypothesis that “[w]here textbooks are included in an exploration of L2 learning, they can explain differences between NS [native speaker] and NNS [non-native speaker] usage” <span class="citation" data-cites="TonoMultipleComparisonsL12004">(as cited in <a href="references.html#ref-TonoMultipleComparisonsL12004" role="doc-biblioref">Tono 2004: 52</a>)</span>. In such endeavours, robust models of textbook language are potentially very useful because few large-scale research projects will realistically be able to investigate both the language of the textbooks that learners use and the language production of these same learners <span class="citation" data-cites="Mollerpedagogicalinputlearner2020">(though see <a href="references.html#ref-Mollerpedagogicalinputlearner2020" role="doc-biblioref">Möller 2020</a> for such a research design in the context of Content and Language Integrated Learning)</span>. The hope is that, if the models of Textbook English elaborated in the present study are shown to be generalisable to further EFL textbooks, they may be used as a means of better understanding certain usage patterns that are more frequent in the language of instructed EFL learners than in that of naturalistic ESL learners <span class="citation" data-cites="WinterTestingPedagogicalNorm2022 LeFollPotentialImpactEFL2023">(for first attempts in this direction, see <a href="references.html#ref-WinterTestingPedagogicalNorm2022" role="doc-biblioref">Winter &amp; Le Foll 2022</a> on EFL learners’ use of if-conditionals; and <a href="references.html#ref-LeFollPotentialImpactEFL2023" role="doc-biblioref">Le Foll 2023</a> on periphrastic causative constructions)</span>.</p>
<p>In sum, there is still much to be learnt from “pedagogically-driven corpus-based research” <span class="citation" data-cites="GabrielatosCorpusBasedAnalysisPedagogical2006">(<a href="references.html#ref-GabrielatosCorpusBasedAnalysisPedagogical2006" role="doc-biblioref">Gabrielatos 2006: 1</a>)</span>. In this study, we have seen how MDA can be applied to describe the language of textbooks on multiple dimensions of variation and to point to potential pedagogical issues. These corpus-based findings highlight the need for greater consideration of register in language teaching and learning. The findings were used to point to the benefits of using freely available corpora and tools to create more meaningful, content-rich learning contexts. In other words, this study has not only demonstrated how multivariable corpus-linguistic methods can be used to analyse Textbook English, but it has also outlined ways in which corpora and corpus tools can be used to boost the representativeness of ‘real-world’ language use in school EFL textbooks. As such, this pedagogically-driven corpus-based study can be said to have “corpused” full circle.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-AchardCognitivelinguisticssecond2004" class="csl-entry" role="listitem">
Achard, Michel &amp; Susanne Niemeier (eds.). 2004. <em>Cognitive linguistics, second language acquisition, and foreign language teaching</em> (Studies on Language Acquisition). De Gruyter.
</div>
<div id="ref-BiberVariationspeechwriting1988" class="csl-entry" role="listitem">
Biber, Douglas. 1988. <em>Variation across speech and writing</em>. Cambridge University Press. <a href="https://doi.org/10.1017/CBO9780511621024">https://doi.org/10.1017/CBO9780511621024</a>.
</div>
<div id="ref-BiberDimensionsRegisterVariation1995" class="csl-entry" role="listitem">
Biber, Douglas. 1995. <em>Dimensions of register variation</em>. Cambridge University Press.
</div>
<div id="ref-BrezinaThereCoreGeneral2015" class="csl-entry" role="listitem">
Brezina, V. &amp; D. Gablasova. 2015. Is there a core general vocabulary? Introducing the <span>New</span> <span>General</span> <span>Service</span> <span>List</span>. <em>Applied Linguistics</em> 36(1). 1–22. <a href="https://doi.org/10.1093/applin/amt018">https://doi.org/10.1093/applin/amt018</a>.
</div>
<div id="ref-CookFunctionsInventedSentences2002" class="csl-entry" role="listitem">
Cook, Vivian. 2002. The functions of invented sentences: A reply to <span>Guy</span> <span>Cook</span>. <em>Applied Linguistics</em> 23(2). 262–269.
</div>
<div id="ref-FankhauserFormulaicLanguageEFLinpreparation" class="csl-entry" role="listitem">
Fankhauser-Kahmeier, Anna. 2024. <em>Phraseology in the english as a foreign language classroom: A corpus-based study of phraseological items in <span>American</span> <span>English</span> and <span>British</span> <span>English</span> conversation with implications for english as a foreign language teaching</em>. Osnabrück University PhD thesis.
</div>
<div id="ref-GabrielatosCorpusBasedAnalysisPedagogical2006" class="csl-entry" role="listitem">
Gabrielatos, Costas. 2006. Corpus-based analysis of pedagogical materials: If-conditionals in ELT coursebooks and the <span>BNC</span>. <a href="https://www.researchgate.net/publication/228880683_Corpus-based_evaluation_of_pedagogical_materials_If-conditionals_in_ELT_coursebooks_and_the_BNC">https://www.researchgate.net/publication/228880683_Corpus-based_evaluation_of_pedagogical_materials_If-conditionals_in_ELT_coursebooks_and_the_BNC</a>.
</div>
<div id="ref-LeFollRegisterVariationSchool2021" class="csl-entry" role="listitem">
Le Foll, Elen. 2021. Register <span>Variation</span> in <span>School</span> EFL <span>Textbooks</span>. <em>Register Studies</em> 3(2). 207–246. <a href="https://doi.org/10.1075/rs.20009.lef">https://doi.org/10.1075/rs.20009.lef</a>.
</div>
<div id="ref-LeFollTextbookEnglishCorpusBased2022" class="csl-entry" role="listitem">
Le Foll, Elen. 2022. <em>Textbook english: A corpus-based analysis of the language of <span>EFL</span> textbooks used in secondary schools in <span>France</span>, <span>Germany</span> and <span>Spain</span></em>. Osnabrück University PhD thesis. <a href="https://doi.org/10.48693/278">https://doi.org/10.48693/278</a>.
</div>
<div id="ref-LeFollPotentialImpactEFL2023" class="csl-entry" role="listitem">
Le Foll, Elen. 2023. The potential impact of EFL textbook language on learner <span>English</span>: A triangulated corpus study. In Kieran Harrington &amp; Patricia Ronan (eds.), <em>Demystifying corpus linguistics for <span>English</span> language teaching</em>, 259–287. Palgrave MacMillan. <a href="https://doi.org/10.1007/978-3-031-11220-1_13">https://doi.org/10.1007/978-3-031-11220-1_13</a>.
</div>
<div id="ref-MartinezPhrasalExpressionsList2012" class="csl-entry" role="listitem">
Martinez, Ron &amp; Norbert Schmitt. 2012. A phrasal expressions list. <em>Applied Linguistics</em> 33(3). 299–320. <a href="https://doi.org/10.1093/applin/ams010">https://doi.org/10.1093/applin/ams010</a>.
</div>
<div id="ref-MindtSpracheGrammatikUnterrichtsgrammatik1987" class="csl-entry" role="listitem">
Mindt, Dieter. 1987. <em>Sprache, <span>Grammatik</span>, <span>Unterrichtsgrammatik</span>: Futurischer <span>Zeitbezug</span> im <span>Englischen</span></em> (Schule Und <span>Forschung</span>). Diesterweg.
</div>
<div id="ref-MindtZeitbezugImEnglischen1992" class="csl-entry" role="listitem">
Mindt, Dieter. 1992. <em>Zeitbezug im <span>Englischen</span>: Eine didaktische <span>Grammatik</span> des englischen <span>Futurs</span></em> (Tübinger Beiträge Zur Linguistik). Gunter Narr Verlag.
</div>
<div id="ref-MindtEmpiricalGrammarEnglish1995" class="csl-entry" role="listitem">
Mindt, Dieter. 1995. <em>An empirical grammar of the <span>English</span> verb: Modal verbs</em>. Cornelsen.
</div>
<div id="ref-MindtEnglishcorpuslinguistics1996" class="csl-entry" role="listitem">
Mindt, Dieter. 1996. English corpus linguistics and the foreign language teaching syllabus. In J. Thomas &amp; M. Short (eds.), <em>Using corpora for language research</em>, 232–247. Longmann.
</div>
<div id="ref-Mollerpedagogicalinputlearner2020" class="csl-entry" role="listitem">
Möller, Verena. 2020. From pedagogical input to learner output: Conditionals in EFL and CLIL teaching materials and learner language. <em>Pedagogical Linguistics</em> 1(2). 95–124. <a href="https://doi.org/10.1075/pl.00001.mol">https://doi.org/10.1075/pl.00001.mol</a>.
</div>
<div id="ref-Perez-Paredesimpactusagebasedapproaches2020" class="csl-entry" role="listitem">
Pérez-Paredes, Pascual, Geraldine Mark &amp; Anne O’Keeffe. 2020. <em>The impact of usage-based approaches on second language learning and teaching</em>. Cambridge University Press. <a href="https://www.cambridge.org/partnership/research/impact-usage-based-approaches-second-language-learning-and-teaching">https://www.cambridge.org/partnership/research/impact-usage-based-approaches-second-language-learning-and-teaching</a>.
</div>
<div id="ref-RomerComparingrealideal2004" class="csl-entry" role="listitem">
Römer, Ute. 2004. Comparing real and ideal language learner input: The use of an EFL textbook corpus in corpus linguistics and language teaching. In Guy Aston, Silvia Bernardini &amp; Dominic Stewart (eds.), <em>Studies in corpus linguistics</em>, 151–168. John Benjamins.
</div>
<div id="ref-RomerProgressivesPatternsPedagogy2005" class="csl-entry" role="listitem">
Römer, Ute. 2005. <em>Progressives, patterns, pedagogy: A corpus-driven approach to <span>English</span> progressive forms, functions, contexts, and didactics</em> (Studies in Corpus Linguistics). John Benjamins.
</div>
<div id="ref-RoslerPerspektivenvielfaltLehrwerkanalyseund2016" class="csl-entry" role="listitem">
Rösler, Dietmar &amp; Michael Schart. 2016. Die <span>Perspektivenvielfalt</span> der <span>Lehrwerkanalyse</span> und ihr weißer <span>Fleck</span>: <span>Einführung</span> in zwei <span>Themenhefte</span>. <em>Info DaF</em> 5(43). 483–493. <a href="http://www.daf.de/downloads/InfoDaF_2016_Heft_5.pdf">http://www.daf.de/downloads/InfoDaF_2016_Heft_5.pdf</a>.
</div>
<div id="ref-RuhlemannRegisterApproachTeaching2008" class="csl-entry" role="listitem">
Rühlemann, Christoph. 2008. A register approach to teaching conversation: Farewell to <span>Standard</span> <span>English</span>? <em>Applied Linguistics</em> 29(4). 672–693. <a href="https://doi.org/10.1093/applin/amn023">https://doi.org/10.1093/applin/amn023</a>.
</div>
<div id="ref-TonoMultipleComparisonsL12004" class="csl-entry" role="listitem">
Tono, Yukio. 2004. Multiple comparisons of IL, L1 and TL corpora: The case of L2 acquisition of verb subcategorization patterns by japanese learners of english. In Guy Aston, Silvia Bernardini &amp; Dominic Stewart (eds.), <em>Corpora and language learners</em> (Studies in Corpus Linguistics), 45–66. John Benjamins. <a href="https://doi.org/10.1075/scl.17.05ton">https://doi.org/10.1075/scl.17.05ton</a>.
</div>
<div id="ref-TylerCognitivelinguisticssecond2012" class="csl-entry" role="listitem">
Tyler, Andrea. 2012. <em>Cognitive linguistics and second language learning: Theoretical basics and experimental evidence</em>. Routledge.
</div>
<div id="ref-TylerUsageinspiredL2instruction2018a" class="csl-entry" role="listitem">
Tyler, Andrea E. &amp; Lourdes Ortega. 2018. Usage-inspired <span>L2</span> instruction: An emergent, researched pedagogy. In Andrea E. Tyler, Lourdes Ortega, Mariko Uno &amp; Hae In Park (eds.), <em>Usage-inspired L2 instruction: Researched pedagogy</em> (Language Learning &amp; Language Teaching), 3–26. John Benjamins. <a href="https://doi.org/10.1075/lllt.49.01tyl">https://doi.org/10.1075/lllt.49.01tyl</a>.
</div>
<div id="ref-WinterTestingPedagogicalNorm2022" class="csl-entry" role="listitem">
Winter, Tatjana &amp; Elen Le Foll. 2022. Testing the pedagogical norm: Comparing if-conditionals in EFL textbooks, learner writing and <span>English</span> outside the classroom. <em>International Journal of Learner Corpus Research</em> 8(1). 31–66. https://doi.org/<a href="https://doi.org/10.1075/ijlcr.20021.win">https://doi.org/10.1075/ijlcr.20021.win</a>.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/elenlefoll\.github\.io\/TextbookMDA\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./OpenScience.html" class="pagination-link" aria-label="Open Science statement">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Open Science statement</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link" aria-label="References">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="https://www.elenlefoll.eu">Elen Le Foll</a></p>
</div>   
    <div class="nav-footer-center">
<p><a href="https://benjamins.com/catalog/scl">Textbook English</a></p>
</div>
    <div class="nav-footer-right">
<p><a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a></p>
</div>
  </div>
</footer>


</body></html>